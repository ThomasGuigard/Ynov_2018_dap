<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport"
	content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0" />

<meta name="description" content="The Dap trainning project admin" />

<meta property="og:type" content="website" />
<meta property="og:site_name" content="Data Access Project" />

<link rel="stylesheet" type="text/css" th:href="@{/css/dap.css}" />

<title th:text="#{admin.title}">Data Access Project Admin</title>



</head>
<body>
	<div th:replace="~{fragments/header :: header}"></div>

	<div th:if="${error}" class="alert alert-danger">
		Error: <span th:text="${error}"></span>
	</div>

	<table class="table">
		<caption>Inbox</caption>
		<thead>
			<tr>
				<th><span class="glyphicon glyphicon-envelope"></span></th>
				<th>From</th>
				<th>Subject</th>
				<th>Received</th>
				<th>Preview</th>
			</tr>
		</thead>
		<tbody>
			<th:forEach items="${messages}" var="message">
				<tr class="${message.isRead == true ? '' : 'info'}">
					<td><th:if test="${message.isRead == false}">
							<span class="glyphicon glyphicon-envelope"></span>
						</th:if></td>
					<td><th:out value="${message.from.emailAddress.name}" /></td>
					<td><th:out value="${message.subject}" /></td>
					<td><th:out value="${message.receivedDateTime}" /></td>
					<td><th:out value="${message.bodyPreview}" /></td>
				</tr>
			</th:forEach>
		</tbody>
	</table>


	<pre>
		<code>Auth code: <span th:text="${session.authCode}"></span>

		ID token: <span th:text="${session.idToken}"></span>
		
		Access token: <span th:text="${session.accessToken}"></span>
		</code>
	</pre>
	<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>